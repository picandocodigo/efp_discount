/* EFP Unofficial discount calculator */

var amountInput=document.getElementById("amount"),dtAmountInput=document.getElementById("dt-amount"),discounted=document.getElementById("discounted"),efp5={element:document.getElementById("efp5"),discount:5},efp10={element:document.getElementById("efp10"),discount:10},ambassador={element:document.getElementById("ambassador"),discount:5},tattoo={element:document.getElementById("tattoo"),discount:20},discounts=[efp5,efp10,ambassador,tattoo];function calculate_discounts(){discounted.value=Number((discount_amount()+dt_discount_amount()).toFixed(2))}function discount_amount(){if(""==amountInput.value||null==amountInput.value)return 0;var t=parseFloat(amountInput.value);return discounts.forEach(function(e){1==e.element.checked&&(t=t*(100-e.discount)/100)}),t}function dt_discount_amount(){if(""==dtAmountInput.value||null==dtAmountInput.value)return 0;var t=parseFloat(dtAmountInput.value);return discounts.forEach(function(e){1==e.element.checked&&(t=t*(100-e.discount)/100)}),1==tattoo.element.checked?t:.85*t}function refreshUI(t){discounts.forEach(function(e){1==(t=e.element).checked?t.parentNode.parentNode.classList.add("checked"):t.parentNode.parentNode.classList.remove("checked")}),1==tattoo.element.checked?(dtAmountInput.value="",dtAmountInput.disabled=!0):dtAmountInput.disabled=!1}efp5.element.addEventListener("change",function(){1==efp10.element.checked&&(efp10.element.checked=!1),refreshUI(efp10.element)}),efp10.element.addEventListener("change",function(){1==efp5.element.checked&&(efp5.element.checked=!1),refreshUI(efp5.element)}),tattoo.element.addEventListener("change",function(){1==ambassador.element.checked&&(ambassador.element.checked=!1),refreshUI(this)}),ambassador.element.addEventListener("change",function(){1==tattoo.element.checked&&(tattoo.element.checked=!1),refreshUI(ambassador.element)}),discounts.forEach(function(e){e.element.addEventListener("change",function(){calculate_discounts()})}),amountInput.addEventListener("input",function(){calculate_discounts()}),dtAmountInput.addEventListener("input",function(){calculate_discounts()});